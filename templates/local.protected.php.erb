<?php
    # Managed by puppet
    # Local modifications to this file will be lost

$conf['title']       = '<%= @wiki_title %>';
$conf['savedir']     = '<%= @data_dir %>';
$conf['useacl']      = <%= @use_acl ? 1 : 0 %>;
$conf['userewrite']  = <%= @use_rewrite ? 1 : 0 %>;

# Disable use of any standard content licenses, e.g. CC
$conf['license']     = '<%= @content_license %>';

# Override the page lock timer
$conf['locktime']    = <%= @locktime %>; # 30*60

# User interface tweaks
$conf['breadcrumbs'] = <%= @breadcrumbs ? 1 : 0 %>;
$conf['youarehere']  = <%= @youarehere ? 1 : 0 %>;
$conf['updatecheck'] = <%= @updatecheck ? 1 : 0 %>;

# Authentication
$conf['openregister']                     = 
$conf['authtype']                         = '<%= @auth_type %>';
<%- if @auth_type == 'authldap' -%>
$conf['auth']['ldap']['version']          = '<%= @ldap_version %>';
$conf['auth']['ldap']['server']           = 'ldap://<%= @ldap_servers.join(" ") %>:389';
$conf['auth']['ldap']['usertree']         = '<%= @ldap_user_tree %>';
$conf['auth']['ldap']['userfilter']       = '<%= @ldap_user_filter %>';
$conf['auth']['ldap']['userscope']        = '<%= @ldap_user_scope %>';
$conf['auth']['ldap']['grouptree']        = '<%= @ldap_group_tree %>';
$conf['auth']['ldap']['groupfilter']      = '<%= @ldap_group_filter %>';
$conf['auth']['ldap']['groupscope']       = '<%= @ldap_group_scope %>';
$conf['auth']['ldap']['starttls']         =  <%= @ldap_starttls ? 1 : 0 %>;
$conf['auth']['ldap']['sso']              =  <%= @ldap_use_sso ? 1 : 0 %>;
$conf['auth']['ldap']['recursive']        =  <%= @ldap_recursive_search ? 1 : 0 %>;
$conf['auth']['ldap']['binddn']           = '<%= @ldap_binddn %>';
$conf['auth']['ldap']['bindpw']           = '<%= @ldap_bindpw %>';
$conf['auth']['ldap']['referrals']        =  <%= @use_referrals ? 1 : 0 %>;
$conf['auth']['ldap']['mapping']['name']  = '<%= @ldap_mapping_name %>';
$conf['auth']['ldap']['mapping']['grps']  = array();
<%- @ldap_mapping_groups.each do |key, value| -%>
$conf['auth']['ldap']['mapping']['grps']['<%= key %>'] = '<%= value %>';
<%- end -%>
<%- end -%>

$conf['manager']                          = '<%= @manager %>';
$conf['superuser']                        = '<%= @superuser %>';

